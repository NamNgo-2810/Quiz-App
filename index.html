<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Quick Quiz</title>
    <link rel="stylesheet" href="app.css" />
  </head>
  <body>
    <div class="author-credit">
      Made by namnv7@mbbank.com.vn
    </div>
    <div class="container">
      <div id="home" class="flex-center flex-column">
        <h1>Quiz App</h1>

        <form>
          <select id="topicSelect" onchange="updateQuestionLimit()">
            <option value="">Select a topic...</option>
            <option value="saa_questions.json">SAA C03 (710 questions)</option>
            <option value="Bộ đề chung 2025 - ôn tập.json">Bộ đề chung 2025 - ôn tập (50 questions)</option>
            <option value="ĐỀ 2 - TTBA.TTĐBCLPM_ Hệ thống LMS.json">ĐỀ 2 - TTBA.TTĐBCLPM (260 questions)</option>
            <option value="ĐỀ 3 - TTPT_ Hệ thống LMS.json">ĐỀ 3 - TTPT (264 questions)</option>
            <option value="ĐỀ CHUNG_ Hệ thống LMS.json">ĐỀ CHUNG - Hệ thống LMS (50 questions)</option>
          </select>

          <input
          type="number"
          id="questionCount"
          placeholder="Enter number of questions (e.g., 10)"
          min="1"
          max="710"
          disabled
          />
        </form>


        <button class="btn" onclick="startQuiz()" disabled id="startBtn">Start Quiz</button>
        <a class="btn" href="/highscores.html">High Scores</a>
      </div>
    </div>

    <script>
      // Topic configuration with max questions for each topic
      const topicConfig = {
        "saa_questions.json": { name: "SAA C03", maxQuestions: 710 },
        "Bộ đề chung 2025 - ôn tập.json": { name: "Bộ đề chung 2025 - ôn tập", maxQuestions: 50 },
        "ĐỀ 2 - TTBA.TTĐBCLPM_ Hệ thống LMS.json": { name: "ĐỀ 2 - TTBA.TTĐBCLPM", maxQuestions: 260 },
        "ĐỀ 3 - TTPT_ Hệ thống LMS.json": { name: "ĐỀ 3 - TTPT", maxQuestions: 264 },
        "ĐỀ CHUNG_ Hệ thống LMS.json": { name: "ĐỀ CHUNG - Hệ thống LMS", maxQuestions: 50 }
      };

      function updateQuestionLimit() {
        const topicSelect = document.getElementById("topicSelect");
        const questionCountInput = document.getElementById("questionCount");
        const startBtn = document.getElementById("startBtn");

        const selectedTopic = topicSelect.value;

        if (selectedTopic) {
          const maxQuestions = topicConfig[selectedTopic].maxQuestions;
          questionCountInput.disabled = false;
          questionCountInput.max = maxQuestions;
          questionCountInput.placeholder = `Enter number of questions (max: ${maxQuestions})`;
          startBtn.disabled = false;
        } else {
          questionCountInput.disabled = true;
          questionCountInput.value = "";
          questionCountInput.placeholder = "Select a topic first";
          startBtn.disabled = true;
        }
      }

      function startQuiz() {
        const topicSelect = document.getElementById("topicSelect");
        const selectedTopic = topicSelect.value;
        const count = parseInt(document.getElementById("questionCount").value);

        if (!selectedTopic) {
          alert("Please select a topic first.");
          return;
        }

        const maxQuestions = topicConfig[selectedTopic].maxQuestions;

        if (!count || count <= 0 || count > maxQuestions) {
          alert(`Please enter a valid number between 1 and ${maxQuestions}.`);
          return;
        }

        localStorage.setItem("questionCount", count);
        localStorage.setItem("selectedTopic", selectedTopic);
        window.location.href = "/game.html";
      }
    </script>
  </body>
</html>
